<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link
            rel="icon"
            type="image/x-icon"
            href="https://abs.twimg.com/favicons/twitter.ico"
    />
    <link rel="stylesheet" th:href="@{/assets/css/style.css}"/>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <!-- Bootstrap CSS -->
    <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
            integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
            crossorigin="anonymous"
    />
    <title>Twitter. It's what's happening</title>
</head>
<body>
<script
        src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"
></script>
<script
        src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"
></script>
<link
        rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Roboto:400,700"
/>
<link
        rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
/>
<link
        rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
/>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>

<div class="container-fluid vh-100">
    <div class="row">
        <div
                class="col-md"
                th:style="'background-image:url('+ @{/assets/images/left_image_850x623.png}+');text-align: center;'"
        >
            <img
                    th:src="@{/assets/images/Logo_white.svg}"
                    alt=""
                    id="left_image_logo"
                    style="padding-top: 25%; padding-bottom: 25%"
            />
        </div>
        <div class="col-md-auto" style="width: 44.5vw; margin-left: 2vw">
            <img th:src="@{/assets/images/Logo_white.svg}" alt="" id="right_image_logo"/>
            <br/>
            <br/>
            <br/>
            <h1 id="happening_now_text" style="text-align: center">
                Happening Now
            </h1>
            <br/>
            <br/>
            <h1
                    id="happening_now_text"
                    style="font-size: 30px; padding-left: 1vw"
            >
                Join Twitter Today.
            </h1>
            <br/>
            <br/>
            <button
                    type="button"
                    data-toggle="modal"
                    data-target="#signUpModal"
                    class="btn btn-primary rounded-pill btn-block"
                    id="button1"
            >
                Sign Up
            </button>
            <br/>
            <a
                    th:href="@{/loginPage}"
                    class="btn btn-outline-primary rounded-pill btn-block"
                    id="button2"
                    style="padding-top: 10px"
            >
                Log In
            </a>
        </div>
    </div>
</div>
<div
        class="modal fade"
        id="signUpModal"
        tabindex="-1"
        aria-labelledby="exampleModalLabel"
        aria-hidden="true"
        style="color: white; background-color: transparent"
>
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content" style="border-color: transparent">
            <div class="modal-body">
                <div class="signup-form">
                    <form
                            action="#"
                            oninput='confirm_password.setCustomValidity(confirm_password.value != password.value ? "Passwords do not match." : "")'
                            th:action="@{/saveMember}"
                            th:object="${member}"
                            method="post"
                            style="background-color: black; padding: 0%; border: none"
                    >
                        <h2>Create Account</h2>
                        <br/>
                        <div class="form-group">
                            <div class="input-group">
                    <span class="input-group-addon"
                    ><i class="fa fa-user"></i
                    ></span>
                                <input
                                        type="text"
                                        th:field="*{name}"
                                        class="form-control"
                                        id="name"
                                        placeholder="Username"
                                        required="required"
                                        style="background-color: black; border-color: #1da1f2; color: white"
                                />
                            </div>
                            <div class="alert alert-danger" role="alert" id="nameMsg"
                                 style="display: none; margin-top: 1vw">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                    <span class="input-group-addon"
                    ><i class="fa fa-paper-plane"></i
                    ></span>
                                <input
                                        type="email"
                                        th:field="*{email}"
                                        id="email"
                                        class="form-control"
                                        placeholder="Email Address"
                                        required="required"
                                        style="background-color: black; border-color: #1da1f2;color: white"
                                />
                            </div>
                            <div class="alert alert-danger" role="alert" id="emailMsg"
                                 style="display: none; margin-top: 1vw">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                    <span class="input-group-addon"
                    ><i class="fa fa-lock"></i
                    ></span>
                                <input
                                        type="password"
                                        th:field="*{password}"
                                        class="form-control"
                                        id="password"
                                        placeholder="Password"
                                        required="required"
                                        style="background-color: black; border-color: #1da1f2;color: white"
                                />
                            </div>
                            <div class="alert alert-danger" role="alert" id="passwordMsg"
                                 style="display: none; margin-top: 1vw">
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-group">
                    <span class="input-group-addon">
                      <i class="fa fa-lock"></i>
                      <i class="fa fa-check"></i>
                    </span>
                                <input
                                        type="password"
                                        class="form-control"
                                        id="confirm_password"
                                        placeholder="Confirm Password"
                                        required="required"
                                        style="background-color: black; border-color: #1da1f2;color: white"
                                />
                            </div>
                        </div>
                        <div class="form-group">
                            <br/>
                            <button
                                    type="submit"
                                    id="submit"
                                    class="btn btn-success btn-block btn-lg"
                                    disabled="disabled"
                            >
                                Sign Up
                            </button>
                            <br/>
                        </div>
                        <p class="small text-center" style="color: white">
                            By clicking the Sign Up button, you agree to our <br/><a
                                href="#"
                        >Terms &amp; Conditions</a
                        >, and <a href="#">Privacy Policy</a>.
                        </p>
                        <div class="text-center" style="color: white">
                            Already have an account? <a href="#">Login here</a>.
                        </div>
                    </form>
                </div>
            </div>
            <div class="modal-footer" hidden="true"></div>
        </div>
    </div>
</div>
<script>
    $("#email").blur(function () {
        var enteredEmail = $("#email").val();
        $.ajax({
            url: "/validateEmail/" + enteredEmail,
            success: function (result) {
                if (result == 'Duplicate') {
                    $('button[type="submit"]').attr('disabled', true);
                    $("#emailMsg").html("Email already registered!");
                    $("#emailMsg").css("display", "block");
                } else {
                    $("#emailMsg").html("");
                    $("#emailMsg").css("display", "none");
                    errors();
                }
            }
        });
    });
    $("#name").blur(function () {
        var enteredName = $("#name").val();
        if (enteredName.toLowerCase() == "null") {
            $('button[type="submit"]').attr('disabled', true);
            $("#nameMsg").html("Name can not be null!!");
            $("#nameMsg").css("display", "block");
        } else {
            $("#nameMsg").html("");
            $("#nameMsg").css("display", "none");
            errors();
        }
    });
    $("#password").blur(function () {
        var enteredPassword = $("#password").val();
        var strongRegex = new RegExp("^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&+=])(?=\\S+$).{8,}$");
        if (!strongRegex.test(enteredPassword)) {
            $('button[type="submit"]').attr('disabled', true);
            $("#passwordMsg").html("Minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character.");
            $("#passwordMsg").css("display", "block");
        } else {
            $("#passwordMsg").html("");
            $("#passwordMsg").css("display", "none");
            errors();
        }
    });

    function errors() {
        var error = false;
        $('.alert-danger').each(function () {
            if ($(this).is(':visible')) {
                error = true;
            }
        });

        if (error) {
            $('button[type="submit"]').attr('disabled', true);
        } else {
            $('button[type="submit"]').attr('disabled', false);
        }
    }
</script>
</body>
</html>
